(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1353561b"],{"09ed":function(t,e,i){t.exports=i.p+"img/emoji32.e4554117.svg"},"0ca6":function(t,e,i){t.exports=i.p+"img/emoji18.d198ae36.svg"},"0e32":function(t,e,i){t.exports=i.p+"img/emoji3.3ba5026f.svg"},"0f3a":function(t,e,i){t.exports=i.p+"img/emoji31.a643f8bf.svg"},1110:function(t,e,i){t.exports=i.p+"img/emoji7.67a41976.svg"},1451:function(t,e,i){t.exports=i.p+"img/emoji13.89bb79eb.svg"},"14b3":function(t,e,i){t.exports=i.p+"img/emoji11.b36f683f.svg"},1883:function(t,e,i){},"1b8b":function(t,e,i){t.exports=i.p+"img/emoji29.28525053.svg"},"1c03":function(t,e,i){t.exports=i.p+"img/emoji16.25e05fad.svg"},"1d09":function(t,e,i){t.exports=i.p+"img/emoji23.509d3b5d.svg"},"1e35":function(t,e,i){"use strict";i("1883")},"2ce6":function(t,e,i){t.exports=i.p+"img/emoji12.3a8dee1d.svg"},"31d9":function(t,e,i){var s={"./emoji1.svg":"64d7","./emoji10.svg":"db55","./emoji11.svg":"14b3","./emoji12.svg":"2ce6","./emoji13.svg":"1451","./emoji14.svg":"6b13","./emoji15.svg":"ada9","./emoji16.svg":"1c03","./emoji17.svg":"69be","./emoji18.svg":"0ca6","./emoji19.svg":"e230","./emoji2.svg":"db4a","./emoji20.svg":"97f0","./emoji21.svg":"879a","./emoji22.svg":"ff5d","./emoji23.svg":"1d09","./emoji24.svg":"b2ba","./emoji25.svg":"d56a","./emoji26.svg":"f4af","./emoji27.svg":"794d","./emoji28.svg":"5fa8","./emoji29.svg":"1b8b","./emoji3.svg":"0e32","./emoji30.svg":"c63a","./emoji31.svg":"0f3a","./emoji32.svg":"09ed","./emoji33.svg":"649e","./emoji34.svg":"5cbd","./emoji35.svg":"9b6c","./emoji36.svg":"b1ec","./emoji4.svg":"dc70","./emoji5.svg":"c0f9","./emoji6.svg":"8ef7","./emoji7.svg":"1110","./emoji8.svg":"55a6","./emoji9.svg":"8137"};function n(t){var e=a(t);return i(e)}function a(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id="31d9"},4569:function(t,e,i){"use strict";i("50b1")},"50b1":function(t,e,i){},"55a6":function(t,e,i){t.exports=i.p+"img/emoji8.78e0a2aa.svg"},"58e6":function(t,e,i){"use strict";var s=i("d282"),n=i("1325"),a=i("a8c1"),o=i("3875"),r=i("543e"),c=Object(s["a"])("pull-refresh"),u=c[0],l=c[1],f=c[2],h=50,g=["pulling","loosing","success"];e["a"]=u({mixins:[o["a"]],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:[Number,String],value:{type:Boolean,required:!0},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:h}},data:function(){return{status:"normal",distance:0,duration:0}},computed:{touchable:function(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},headStyle:function(){if(this.headHeight!==h)return{height:this.headHeight+"px"}}},watch:{value:function(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.slots("success")||this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted:function(){this.bindTouchEvent(this.$refs.track),this.scrollEl=Object(a["d"])(this.$el)},methods:{checkPullStart:function(t){this.ceiling=0===Object(a["c"])(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart:function(t){this.touchable&&this.checkPullStart(t)},onTouchMove:function(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(Object(n["c"])(t),this.setStatus(this.ease(this.deltaY))))},onTouchEnd:function(){var t=this;this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.$emit("input",!0),this.$nextTick((function(){t.$emit("refresh")}))):this.setStatus(0))},ease:function(t){var e=+(this.pullDistance||this.headHeight);return t>e&&(t=t<2*e?e+(t-e)/2:1.5*e+(t-2*e)/4),Math.round(t)},setStatus:function(t,e){var i;i=e?"loading":0===t?"normal":t<(this.pullDistance||this.headHeight)?"pulling":"loosing",this.distance=t,i!==this.status&&(this.status=i)},genStatus:function(){var t=this.$createElement,e=this.status,i=this.distance,s=this.slots(e,{distance:i});if(s)return s;var n=[],a=this[e+"Text"]||f(e);return-1!==g.indexOf(e)&&n.push(t("div",{class:l("text")},[a])),"loading"===e&&n.push(t(r["a"],{attrs:{size:"16"}},[a])),n},showSuccessTip:function(){var t=this;this.status="success",setTimeout((function(){t.setStatus(0)}),this.successDuration)}},render:function(){var t=arguments[0],e={transitionDuration:this.duration+"ms",transform:this.distance?"translate3d(0,"+this.distance+"px, 0)":""};return t("div",{class:l()},[t("div",{ref:"track",class:l("track"),style:e},[t("div",{class:l("head"),style:this.headStyle},[this.genStatus()]),this.slots()])])}})},"5cbd":function(t,e,i){t.exports=i.p+"img/emoji34.2302d815.svg"},"5fa8":function(t,e,i){t.exports=i.p+"img/emoji28.df020a7a.svg"},"649e":function(t,e,i){t.exports=i.p+"img/emoji33.9d966b13.svg"},"64d7":function(t,e,i){t.exports=i.p+"img/emoji1.84b1b233.svg"},"69be":function(t,e,i){t.exports=i.p+"img/emoji17.c2301a29.svg"},"6ab3":function(t,e,i){},"6b13":function(t,e,i){t.exports=i.p+"img/emoji14.8b64cd96.svg"},"70d3":function(t,e,i){"use strict";i("fb46")},"794d":function(t,e,i){t.exports=i.p+"img/emoji27.5d2f5801.svg"},8137:function(t,e,i){t.exports=i.p+"img/emoji9.41525df5.svg"},"879a":function(t,e,i){t.exports=i.p+"img/emoji21.6bdd5862.svg"},"8a0b":function(t,e,i){},"8def":function(t,e,i){},"8ef7":function(t,e,i){t.exports=i.p+"img/emoji6.2e9faf9c.svg"},"97f0":function(t,e,i){t.exports=i.p+"img/emoji20.8460c6ed.svg"},"9b6c":function(t,e,i){t.exports=i.p+"img/emoji35.2c94f50a.svg"},ab71:function(t,e,i){"use strict";i("68ef"),i("e3b3"),i("6ab3")},ada9:function(t,e,i){t.exports=i.p+"img/emoji15.7d2e4152.svg"},b03c:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat_page bgc-gray"},[i("nav-bar",{attrs:{fixed:"",title:t.$route.params.nickName,"left-text":"返回","left-arrow":""},on:{"click-left":t.back}}),i("div",{staticClass:"news-con pd10"},[t._l(t.tableList,(function(t){return i("div",{key:t.messageTime,staticClass:"mb10"},[i("News",{attrs:{news:t}})],1)})),i("div",{ref:"href"})],2),i("div",{staticClass:"c-bottom"},[i("Toolbar",{ref:"tooBarRef",attrs:{toUserId:t.$route.params.userId},on:{refresh:t.refresh}})],1)],1)},n=[],a=(i("ab71"),i("58e6")),o=(i("68ef"),i("9d70"),i("3743"),i("8a0b"),i("d282")),r=i("b1d2"),c=i("ad06"),u=Object(o["a"])("nav-bar"),l=u[0],f=u[1],h=l({props:{title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,border:{type:Boolean,default:!0}},data:function(){return{height:null}},mounted:function(){this.placeholder&&this.fixed&&(this.height=this.$refs.navBar.getBoundingClientRect().height)},methods:{genLeft:function(){var t=this.$createElement,e=this.slots("left");return e||[this.leftArrow&&t(c["a"],{class:f("arrow"),attrs:{name:"arrow-left"}}),this.leftText&&t("span",{class:f("text")},[this.leftText])]},genRight:function(){var t=this.$createElement,e=this.slots("right");return e||(this.rightText?t("span",{class:f("text")},[this.rightText]):void 0)},genNavBar:function(){var t,e=this.$createElement;return e("div",{ref:"navBar",style:{zIndex:this.zIndex},class:[f({fixed:this.fixed,"safe-area-inset-top":this.safeAreaInsetTop}),(t={},t[r["b"]]=this.border,t)]},[e("div",{class:f("content")},[this.hasLeft()&&e("div",{class:f("left"),on:{click:this.onClickLeft}},[this.genLeft()]),e("div",{class:[f("title"),"van-ellipsis"]},[this.slots("title")||this.title]),this.hasRight()&&e("div",{class:f("right"),on:{click:this.onClickRight}},[this.genRight()])])])},hasLeft:function(){return this.leftArrow||this.leftText||this.slots("left")},hasRight:function(){return this.rightText||this.slots("right")},onClickLeft:function(t){this.$emit("click-left",t)},onClickRight:function(t){this.$emit("click-right",t)}},render:function(){var t=arguments[0];return this.placeholder&&this.fixed?t("div",{class:f("placeholder"),style:{height:this.height+"px"}},[this.genNavBar()]):this.genNavBar()}}),g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"toolbar pd10 flex-align-bottom bgc-light-gray"},[i("div",{ref:"inpRefs",staticClass:"inpt pd10 b-r4 fs14 mr10",attrs:{contenteditable:"true"},on:{click:function(e){t.showEmojiPanel=!1}}}),i("div",{staticClass:"right flex-space-center"},[i("van-icon",{attrs:{name:"smile-o",size:"30"},on:{click:function(e){t.showEmojiPanel=!t.showEmojiPanel}}}),i("van-button",{staticClass:"w60",attrs:{disabled:t.buttAble,type:"primary",size:"small",color:"#fe335c"},on:{click:t.send}},[t._v("发送")])],1)]),t.showEmojiPanel?i("Emojipanel",{ref:"emojipanelRef",on:{add:t.appendEmoji}}):t._e()],1)},d=[],m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"panel pd10"},t._l(36,(function(e,s){return i("img",{key:s,attrs:{src:t._f("emojiUrl")(s+1)},on:{click:function(e){return t.handleClick(s+1)}}})})),0)},p=[],v={data:function(){return{}},mounted:function(){},methods:{handleClick:function(t){this.$emit("add",'<img width="20px" style="margin:0 2px" src='.concat(i("31d9")("./emoji".concat(t,".svg"))," />"))}},filters:{emojiUrl:function(t){return i("31d9")("./emoji".concat(t,".svg"))}}},b=v,j=(i("1e35"),i("2877")),x=Object(j["a"])(b,m,p,!1,null,"6ed1ed9c",null),w=x.exports,T={props:["toUserId"],components:{Emojipanel:w},data:function(){return{buttAble:!1,showEmojiPanel:!1}},methods:{appendEmoji:function(t){var e=this.$refs.inpRefs.innerHTML;this.$refs.inpRefs.innerHTML=e+t},send:function(){var t=this,e={message:this.$refs.inpRefs.innerHTML,toUserId:this.toUserId};this.$httpApi.message(e).then((function(e){e.success&&(t.$refs.inpRefs.innerHTML="",t.$emit("refresh"))}))}}},k=T,S=(i("4569"),Object(j["a"])(k,g,d,!1,null,"4dc8c4f1",null)),$=S.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ta-c fs10 light-black mb10"},[t._v(t._s(t._f("formatDate2")(t.news.messageTime)))]),t.news.user.userId!==t.userInfo.userId?i("van-row",{staticClass:"mb20"},[i("van-col",{attrs:{span:"3"}},[i("div",{staticClass:"icon icon-left mr10"},[i("HeadIcon",{attrs:{round:"true",size:"36",path:t.news.user.avatar}})],1)]),i("van-col",{attrs:{span:"18"}},[i("div",{staticClass:"msg msg-left pd10 ta-l",domProps:{innerHTML:t._s(t.news.message)}})]),i("van-col",{attrs:{span:"3"}})],1):i("van-row",{staticClass:"mb30"},[i("van-col",{attrs:{span:"3"}}),i("van-col",{staticStyle:{"text-align":"right"},attrs:{span:"18"}},[i("div",{staticClass:"msg msg-right pd10 ta-l",class:"right"+t.news.status,domProps:{innerHTML:t._s(t.news.message)}})]),i("van-col",{staticStyle:{"text-align":"right"},attrs:{span:"3"}},[i("div",{staticClass:"icon icon-right"},[i("HeadIcon",{attrs:{round:"true",size:"36",path:t.news.user.avatar}})],1)])],1)],1)},C=[],D=i("5530"),y=i("2f62"),E=i("c466"),_={props:["news"],computed:Object(D["a"])({},Object(y["c"])({userInfo:function(t){return t.User.userInfo}})),filters:{formatDate2:E["a"]}},R=_,L=(i("f16f"),Object(j["a"])(R,I,C,!1,null,"3c5f2552",null)),O=L.exports,B={components:{NavBar:h,PullRefresh:a["a"],Toolbar:$,News:O},data:function(){return{tableList:[],chatTimer:null}},created:function(){var t=this;this.reloadData().then((function(){t.$nextTick((function(){t.$refs.href.scrollIntoView()}))})),this.chatTimer=setInterval((function(){t.reloadData()}),2e3)},destroyed:function(){this.chatTimer&&clearInterval(this.chatTimer)},methods:{back:function(){this.$router.back()},reloadData:function(){var t=this,e={page:0,size:9999};return this.$httpApi.messageChat(this.$route.params.chatId,e).then((function(e){e&&e.length>0&&(t.tableList=e.reverse(),t.messageRead())}))},refresh:function(){var t=this;this.reloadData().then((function(){t.$refs.href.scrollIntoView()}))},messageRead:function(){this.$httpApi.messageRead(this.$route.params.chatId)}}},H=B,M=(i("70d3"),Object(j["a"])(H,s,n,!1,null,"7156a0ab",null));e["default"]=M.exports},b1ec:function(t,e,i){t.exports=i.p+"img/emoji36.b988786e.svg"},b2ba:function(t,e,i){t.exports=i.p+"img/emoji24.34738174.svg"},c0f9:function(t,e,i){t.exports=i.p+"img/emoji5.14950785.svg"},c466:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return n}));i("fb6a");function s(t){if(t&&17==t.length){var e=parseInt(t.substring(0,4)),i=parseInt(t.substring(4,6)),s=parseInt(t.substring(6,8)),n=parseInt(t.substring(8,10)),a=parseInt(t.substring(10,12)),o=parseInt(t.substring(12,14)),r=parseInt(t.substring(14,17)),c=new Date(e,i-1,s,n,a,o,r),u=new Date,l=u.getTime()-c.getTime();if(l<1e3)return"刚刚";if(l<6e4)return Math.round(l/1e3)+"秒前";if(l<36e5)return Math.round(l/6e4)+"分前";var f=new Date(u.getFullYear(),u.getMonth(),u.getDate());if(c>f)return n+":"+a;var h=new Date(f.getTime()-864e5);if(c<f&&c>h)return"昨天 "+n+":"+a;var g=new Date(c.getFullYear());return c>g?i+"-"+s+" "+n+":"+a:e+"-"+i+"-"+s}}function n(t){if("undefined"==String(t))return"";var e=t.slice(0,4)+"/"+t.slice(4,6)+"/"+t.slice(6,8)+" "+t.slice(8,10)+":"+t.slice(10,12)+":"+t.slice(12,14),i=new Date(e),s=new Date,n=s.getTime()-i.getTime(),a=Math.floor(n/864e5);if(0==a){var o=t.slice(8,10)+":"+t.slice(10,12)+":"+t.slice(12,14);return o}if(a>0){o=t.slice(4,6)+"-"+t.slice(6,8)+" "+t.slice(8,10)+":"+t.slice(10,12)+":"+t.slice(12,14);return o}if(a>365){o=t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8)+" "+t.slice(8,10)+":"+t.slice(10,12)+":"+t.slice(12,14);return o}}},c63a:function(t,e,i){t.exports=i.p+"img/emoji30.8c42c856.svg"},d56a:function(t,e,i){t.exports=i.p+"img/emoji25.7e3dec8a.svg"},db4a:function(t,e,i){t.exports=i.p+"img/emoji2.0cfab5c6.svg"},db55:function(t,e,i){t.exports=i.p+"img/emoji10.2674c92f.svg"},dc70:function(t,e,i){t.exports=i.p+"img/emoji4.82d1c829.svg"},e230:function(t,e,i){t.exports=i.p+"img/emoji19.bc2b2fa2.svg"},f16f:function(t,e,i){"use strict";i("8def")},f4af:function(t,e,i){t.exports=i.p+"img/emoji26.0aa07510.svg"},fb46:function(t,e,i){},ff5d:function(t,e,i){t.exports=i.p+"img/emoji22.22d36147.svg"}}]);