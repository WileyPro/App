(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["moment"],{"0a90":function(t,s,e){"use strict";e("e46c")},7307:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("van-overlay",{attrs:{show:t.showPop},on:{click:function(s){t.showPop=!1}}},[e("div",{staticClass:"wrapper flex-center",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"form pd20 b-r10"},[e("div",{staticClass:"flex-space-center mb20"},[e("span",{staticClass:"bold fs16"},[t._v("评论")]),e("van-icon",{staticClass:"wh20",attrs:{name:"cross",size:"20"},on:{click:function(s){t.showPop=!1}}})],1),e("van-field",{attrs:{placeholder:"请勿违规索要联系方式",type:"textarea",clearable:""},model:{value:t.comment,callback:function(s){t.comment=s},expression:"comment"}}),e("div",{staticClass:"mt20"},[e("van-button",{staticClass:"w",attrs:{disabled:!t.comment,type:"primary",size:"normal",color:"#fe335c",maxlength:"1024","show-word-limit":""},on:{click:t.commentAction}},[t._v("发表评论")])],1)],1)])])},n=[],i={data:function(){return{showPop:!1,comment:"",params:null}},created:function(){console.log("comment created")},methods:{show:function(t){this.showPop=!0,this.params=t},commentAction:function(){this.showPop=!1,this.$emit("submit",this.params,this.comment)}}},o=i,c=(e("765c"),e("2877")),m=Object(c["a"])(o,a,n,!1,null,"26152954",null);s["a"]=m.exports},"765c":function(t,s,e){"use strict";e("d73d")},8503:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t._v("发帖子")])},n=[],i={},o=i,c=e("2877"),m=Object(c["a"])(o,a,n,!1,null,null,null);s["default"]=m.exports},ae32:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.momentData?e("div",{staticClass:"pd10 scrollpage"},[e("div",{staticClass:"flex-space-center mb10"},[e("div",[e("HeadIcon",{attrs:{round:"true",size:"40",path:t.momentData.author.avatar}})],1),e("div",{staticClass:"flex-space-center",staticStyle:{width:"calc(100% - 48px)"}},[e("div",{staticClass:"pd10"},[e("div",{staticClass:"bold black fs14 mb4"},[t._v(t._s(t.nickName))]),e("div",{staticClass:"light-black"},[t._v(t._s(t.momentData.author.careers||"有秘密的人"))])]),e("div",[e("FollowButt")],1)])]),e("div",{staticClass:"fs14 black mb10",domProps:{innerHTML:t._s(t.momentData.postContent)}}),e("div",{staticClass:"mb10"},[e("MomentImgs",{attrs:{imgs:t.imgList}})],1),e("div",{staticClass:"mb10 tips light flex-align-center"},[e("van-icon",{staticClass:"mr4",attrs:{name:"location",color:"#5396E4"}}),e("span",{staticClass:"mr4"},[t._v(t._s(t.momentData.location))]),e("span",[t._v(t._s(t._f("formatShortDate")(t.momentData.postTime)))])],1),e("div",{staticClass:"bottom mb10 pb10 flex-space-center van-hairline--bottom"},[e("MomentTools",{attrs:{momentData:t.momentData},on:{like:t.likeAction,pinglun:t.replyPostAction}})],1),t.momentData.comments&&t.momentData.comments.length>0?e("div",{staticClass:"pd10 b-r4"},[e("div",{staticClass:"discuss"},t._l(t.momentData.comments,(function(s,a){return e("div",{key:a,staticClass:"mb4"},[e("div",{staticClass:"flex-space-center mb10"},[e("div",[e("HeadIcon",{attrs:{round:"true",size:"36",path:s.commentUser.avatar}})],1),e("div",{staticClass:"flex-space-center",staticStyle:{width:"calc(100% - 48px)"}},[e("div",[e("div",{staticClass:"bold black fs14 mb4"},[t._v(t._s(s.commentUser.nickname))]),e("div",{staticClass:"light-black"},[t._v(t._s(t._f("formatShortDate")(s.commentTime))+" · 回复")])]),t._m(0,!0)])]),e("div",{staticStyle:{"padding-left":"48px"}},[e("div",{staticClass:"mb8"},[t._v(t._s(s.commentContent))]),s.replies&&s.replies.length>0?e("div",{staticClass:"bgc-light-blue b-r4 pd8 mb8"},t._l(s.replies,(function(s){return e("div",{key:s.postCommentId,staticClass:"mb4"},[e("span",{staticClass:"highlight"},[t._v(t._s(s.replyer.nickname))]),e("span",{staticClass:"light"},[t._v(" 回复 ")]),e("span",{staticClass:"highlight"},[t._v(t._s(s.replyTo.nickname))]),e("span",{staticClass:"light"},[t._v(": "+t._s(s.replyContent))])])})),0):t._e()])])})),0)]):t._e(),e("CommentPop",{ref:"commentPopRef",on:{submit:t.commentDone}})],1):t._e()},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("i",{staticClass:"zan"})])}],i=(e("d81d"),e("1276"),e("ac1f"),e("99af"),e("7307")),o=e("1e66"),c=e("ed62"),m=e("c466"),l={components:{CommentPop:i["a"],MomentImgs:o["a"],MomentTools:c["a"]},data:function(){return{postId:"",momentData:null}},created:function(){this.postId=this.$route.params.postId,this.getDetail()},computed:{nickName:function(){return this.momentData.isAnonymous?"匿名":this.momentData.author.nickname},imgList:function(){var t=this;if(!this.momentData.images)return[];var s=this.momentData.images;return s.split(";").map((function(s){return 0===s.indexOf("http")?s:"".concat(t.$config.imgHost).concat(s)}))}},methods:{getDetail:function(){var t=this;this.$httpApi.postDetail(this.postId).then((function(s){t.momentData=s}))},likeAction:function(){var t=this;this.momentData.isLike?this.$httpApi.postDislike(this.postId).then((function(){t.getDetail()})):this.$httpApi.postLike(this.postId).then((function(){t.getDetail()}))},replyPostAction:function(){this.$refs.commentPopRef.show({type:"post",id:this.postId})},replyCommentAction:function(t){this.$refs.commentPopRef.show({type:"comment",id:t})},commentDone:function(t,s){t.type}},filters:{formatShortDate:m["b"]}},r=l,p=(e("0a90"),e("2877")),d=Object(p["a"])(r,a,n,!1,null,"f00217d2",null);s["default"]=d.exports},d73d:function(t,s,e){},e46c:function(t,s,e){}}]);